---
page_title: "mist_org_nacidp Resource - terraform-provider-mist"
subcategory: "Access Assurance"
description: |-
  This resource manages NAC IDPs (Identity Providers).
  The NAC IDPs are used to validate NAC client accounts against an IDP with OAuth2.0, LDAP/LDAPS, or a local Mist Edge.Mist Access Assurance can also retrieve group membership from the IDP, and use this information in the NAC Rules (mist_org_nacrule resource)
  IMPORTANT:
  Once created, the NAC IDP must be registered in the mist_org_setting resource (full path: mist_org_setting.mist_nac.idps).The associated REALMS are configured under mist_org_setting.mist_nac.idpsTo make the IDP the Default IDP, set the IDP ID under mist_org_setting.mist_nac.default_idp_id
  For SAML IDP, the NAC IDP Metadata can be retrieved with the mist_org_nacidp_metadata data source.
---

# mist_org_nacidp (Resource)

This resource manages NAC IDPs (Identity Providers).

The NAC IDPs are used to validate NAC client accounts against an IDP with OAuth2.0, LDAP/LDAPS, or a local Mist Edge.  
Mist Access Assurance can also retrieve group membership from the IDP, and use this information in the NAC Rules (`mist_org_nacrule` resource)

IMPORTANT:
* Once created, the NAC IDP must be registered in the `mist_org_setting` resource (full path: `mist_org_setting.mist_nac.idps`).
* The associated REALMS are configured under `mist_org_setting.mist_nac.idps`
* To make the IDP the Default IDP, set the IDP ID under `mist_org_setting.mist_nac.default_idp_id`

For SAML IDP, the NAC IDP Metadata can be retrieved with the `mist_org_nacidp_metadata` data source.


## Example Usage

```terraform
// OAuth with Azure Example
resource "mist_org_nacidp" "idp_azure" {
  org_id                   = mist_org.terraform_test.id
  name                     = "idp_azure"
  idp_type                 = "oauth"
  oauth_cc_client_id       = "client_id"
  oauth_cc_client_secret   = "-----BEGIN CERTIFICATE-----MIIF0jC .../fSCGx7-----END CERTIFICATE-----"
  oauth_ropc_client_id     = "ropc_client_id"
  oauth_ropc_client_secret = "ropc_client_secret"
  oauth_tenant_id          = "tenant_id"
  oauth_type               = "azure"
}

// Custom LDAP Example
resource "mist_org_nacidp" "idp_ldap" {
  org_id             = mist_org.terraform_test.id
  name               = "idp_ldap"
  idp_type           = "ldap"
  ldap_type          = "custom"
  group_filter       = "memberOf"
  member_filter      = "memberOf"
  ldap_user_filter   = "(mail=%s)"
  ldap_server_hosts  = ["ldap.mycorp.com", "1.2.3.4"]
  ldap_base_dn       = "DC=abc,DC=com"
  ldap_bind_dn       = "CN=admin,CN=users,DC=abc,DC=com"
  ldap_bind_password = "secret!password"
  ldap_cacerts = [
    "-----BEGIN CERTIFICATE-----\nMIIFZjCCA06gAwIBAgIIP61/1qm/uDowDQYJKoZIhvcNAQELBQE\n-----END CERTIFICATE-----",
    "-----BEGIN CERTIFICATE-----\nBhMCRVMxFDASBgNVBAoMC1N0YXJ0Q29tIENBMSwwKgYDVn-----END CERTIFICATE-----"
  ]
  ldap_client_cert = "-----BEGIN CERTIFICATE-----\nMIIFZjCCA06gAwIBAgIIP61/1qm/uDowDQYJKoZIhvcNAQELBQE\n-----END CERTIFICATE-----"
  ldap_client_key  = "-----BEGIN PRI..."
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `idp_type` (String) enum: `ldap`, `mxedge_proxy`, `oauth`
- `name` (String) Name
- `org_id` (String)

### Optional

- `group_filter` (String) Required if `ldap_type`==`custom`, LDAP filter that will identify the type of group
- `ldap_base_dn` (String) Required if `idp_type`==`ldap`, whole domain or a specific organization unit (container) in Search base to specify where users and groups are found in the LDAP tree
- `ldap_bind_dn` (String) Required if `idp_type`==`ldap`, the account used to authenticate against the LDAP
- `ldap_bind_password` (String) Required if `idp_type`==`ldap`, the password used to authenticate against the LDAP
- `ldap_cacerts` (List of String) Required if `idp_type`==`ldap`, list of CA certificates to validate the LDAP certificate
- `ldap_client_cert` (String) If `idp_type`==`ldap`, LDAPS Client certificate
- `ldap_client_key` (String) If `idp_type`==`ldap`, Key for the `ldap_client_cert`
- `ldap_group_attr` (String) If `ldap_type`==`custom`
- `ldap_group_dn` (String) If `ldap_type`==`custom`
- `ldap_resolve_groups` (Boolean) If `idp_type`==`ldap`, whether to recursively resolve LDAP groups
- `ldap_server_hosts` (List of String) If `idp_type`==`ldap`, list of LDAP/LDAPS server IP Addresses or Hostnames
- `ldap_type` (String) if `idp_type`==`ldap`. enum: `azure`, `custom`, `google`, `okta`, `ping_identity`
- `ldap_user_filter` (String) Required if `ldap_type`==`custom`, LDAP filter that will identify the type of user
- `member_filter` (String) Required if `ldap_type`==`custom`,LDAP filter that will identify the type of member
- `oauth_cc_client_id` (String) Required if `idp_type`==`oauth`, Client Credentials
- `oauth_cc_client_secret` (String) Required if `idp_type`==`oauth`, oauth_cc_client_secret is RSA private key, of the form "-----BEGIN RSA PRIVATE KEY--...."
- `oauth_discovery_url` (String) If `idp_type`==`oauth`
- `oauth_ping_identity_region` (String) enum: `us` (United States, default), `ca` (Canada), `eu` (Europe), `asia` (Asia), `au` (Australia)
- `oauth_ropc_client_id` (String) If `idp_type`==`oauth`, ropc = Resource Owner Password Credentials
- `oauth_ropc_client_secret` (String) If `oauth_type`==`azure` or `oauth_type`==`azure-gov`. oauth_ropc_client_secret can be empty
- `oauth_tenant_id` (String) Required if `idp_type`==`oauth`, oauth_tenant_id
- `oauth_type` (String) if `idp_type`==`oauth`. enum: `azure`, `azure-gov`, `okta`, `ping_identity`
- `scim_enabled` (Boolean) If `idp_type`==`oauth`, indicates if SCIM provisioning is enabled for the OAuth IDP
- `scim_secret_token` (String) If `idp_type`==`oauth`, scim_secret_token (auto-generated when not provided by caller and `scim_enabled`==`true`, empty string when `scim_enabled`==`false`) is used as the Bearer token in the Authorization header of SCIM provisioning requests by the IDP

### Read-Only

- `id` (String) Unique ID of the object instance in the Mist Organization



## Import
Using `terraform import`, import `mist_org_nacidp` with:
```shell
# Org PSK can be imported by specifying the org_id and the nacidp_id
terraform import mist_org_nacidp.idp_azure 17b46405-3a6d-4715-8bb4-6bb6d06f316a.d3c42998-9012-4859-9743-6b9bee475309
```