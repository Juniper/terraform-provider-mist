---
page_title: "mist_upgrade_device Resource - terraform-provider-mist"
subcategory: "Devices"
description: |-
  This resource can be used to upgrade the frimware of a single device (Wi-Fi Access Points, Switches and SRX/SSR Gateways).
  The resource will send the upgrade command to Mist, which will take care of deploying the new firmware version to the device, and reboot it if required.
  The time required to upgrade a device depends on the type of device and its hardware. By default, the resource will track the upgrade process and only return the result once the device is upgraded and rebooted (unless reboot==false or reboot_at is set).If required it is possible to run the upgrade in async mode (attribute sync=false). In this case, the resource will only trigger the upgrade and return the Mist response, but will not track the upgrade progress.
  The list of available firmware versions can be retrieved with the mist_device_versions data source.
---

# mist_upgrade_device (Resource)

This resource can be used to upgrade the frimware of a single device (Wi-Fi Access Points, Switches and SRX/SSR Gateways).

The resource will send the upgrade command to Mist, which will take care of deploying the new firmware version to the device, and reboot it if required.

The time required to upgrade a device depends on the type of device and its hardware. By default, the resource will track the upgrade process and only return the result once the device is upgraded and rebooted (unless `reboot`==`false` or `reboot_at` is set).  
If required it is possible to run the upgrade in async mode (attribute `sync`=`false`). In this case, the resource will only trigger the upgrade and return the Mist response, but will not track the upgrade progress.

The list of available firmware versions can be retrieved with the `mist_device_versions` data source.


## Example Usage

```terraform
resource "mist_upgrade_device" "upgrade_one" {
  site_id = mist_site.terraform_test.id
  device_id = mist_device_switch.switch_one.id
  upgrade_to_version = "24.2R1-S1.10"
  reboot = true
  sync_upgrade_timeout = 3600
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `device_id` (String)
- `site_id` (String)
- `upgrade_to_version` (String) firmware version to deploy to the device. Use the `mist_device_versions` datasource to get the list of available firmware versions

### Optional

- `reboot` (Boolean) For Switches and Gateways only (APs are automatically rebooted). Reboot device immediately after upgrade is completed
- `reboot_at` (Number) For Switches and Gateways only and if `reboot`==`true`. Reboot start time in epoch seconds, default is `start_time`
- `snapshot` (Boolean) For Junos devices only. Perform recovery snapshot after device is rebooted
- `start_time` (Number) firmware download start time in epoch
- `sync_upgrade` (Boolean) if set to `false`, the provider will just trigger the upgrade and not wait for the end of the upgrade process. Default is `true`
- `sync_upgrade_refresh_interval` (Number) if set to `sync_upgrade`==`true`, how long to wait between each refresh of the upgrade status, in seconds. Default is 30, minimum is 15
- `sync_upgrade_start_timeout` (Number) if set to `sync_upgrade`==`true`, how long to wait for the upgrade to start before raising an error, in seconds. Default is 60, minimum is 60
- `sync_upgrade_timeout` (Number) if set to `sync_upgrade`==`true`, how long to wait for the upgrade to end before raising an error, in seconds. Default is 1800

### Read-Only

- `device_version` (String) current device firmware version
- `fwupdate` (Attributes) (see [below for nested schema](#nestedatt--fwupdate))
- `status` (String) enum: `error`, `inprogress`, `scheduled`, `starting`, `success`
- `timestamp` (Number) timestamp

<a id="nestedatt--fwupdate"></a>
### Nested Schema for `fwupdate`

Read-Only:

- `progress` (Number)
- `status` (String) enum: `inprogress`, `failed`, `upgraded`
- `status_id` (Number)
- `timestamp` (Number)
- `will_retry` (Boolean)


